<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="./assets/css/styles.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

  <title>Class Project 1</title>
</head>

<body>


  <!-- The Modal -->
  <div class="authentication modal fade" id="register" tabindex="-1" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="Sign Up">Authentication</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class=" d-flex flex-column">
            <p class="fs-6 mb-2 fw-bold">First Name:</p>
            <input class="first_name w-50 s-6 mb-3 city_input" type="text" />
          </div>
          <div class=" d-flex flex-column">
            <p class="fs-6 mb-2 fw-bold">Last Name:</p>
            <input class="last_name w-50 s-6 mb-3 city_input" type="text" />
          </div>
          <div class=" d-flex flex-column">
            <p class="fs-6 mb-2 fw-bold">User Name:</p>
            <input class="user w-50 s-6 mb-3 city_input" type="text" />
          </div>
          <div class=" d-flex flex-column">
            <p class="fs-6 mb-2 fw-bold">Password:</p>
            <input class="password w-50 s-6 mb-3 city_input" type="password" />
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary new_user" data-bs-dismiss="modal">Save changes</button>
        </div>
      </div>
    </div>
  </div>
  <!--Header Begins-->

  <!--Welcome Modal Prompt Begins-->
  <!-- <div class="modal_outer">
     <div class="modal_body" id="modal_body">
        <h2 class="modal_prompt">Welcome to the National Park Planner!</h2>
        <p>Search for a park and we will recommend activities for that area.</p>
        <a href="#search_form"><button id="modal_button">Try now!</button></a>
      </div>
    </div> -->
  <!--Welcome Modal Prompt Ends-->

  <header class="header">
    <div id="header_content">
      <a href="#" class="logo">Parks Planner</a>
      <nav class="navbar">
        <a href="./login.html">Login</a>
        <a href="./api.html">API</a>
      </nav>
    </div>
  </header>

  <div id="container">
    <main>

      <section class="homepage">
        <div class="homepage-text">
          <h2>Plan Your Adventures</h2>
          <p class="homepage-subtext">We create personalized National Parks plans for you!</p>
          <p class="homepage-subtext-line-2">Your Adventure awaits</p>
          <button id="try-now" class="try-now" data-bs-toggle="modal" data-bs-target="#register">Try Now</button>
        </div>
      </section>

      <section id="nextTripContainer">
        <div id="text">
          <h3>PLAN YOUR NEXT TRIP!</h3>
        </div>
        <div id="Question">
          <p>Which state are you exploring?</p>
          <input type="" id="userState" class="box">
        </div>
        <br>
        <div id="Question">
          <label for="lengthHike">Do you like short hikes or long hikes?</label>
          <br>
          <select name="shortLong" id="hikeLength" class="box">
            <option value="short">Short Hikes</option>
            <option value="long">Long Hikes</option>
            <option value="either">Both</option>
          </select>
        </div>
        <br>
        <div id="Question">
          <p>What activities are you interested in?</p>
          <input type="" id="userActivities" class="box">
        </div>
        <br>
        <div id="Question">
          <label for="legthHike">Do you prefer cold weather or warm weather?</label>
          <br>
          <select name="coldWarm" id="preferredTemp" class="box">
            <option value="cold">Cold Weather</option>
            <option value="warm">Warm Weather</option>
            <option value="either">Both</option>
          </select>
          <br>
        </div>

        
  </div>
  


    <section class="lastpage">
      <h4>Some Trails We Think You'd Like:</h4>
      <div class="trail-recommendations">
        <ul>
          <a href="">
            <li class=lastUl id="trail_a">Trail A:</li>
          </a>
          <textarea class="trail_description"></textarea><br>
          <a href="">
            <li class=lastUl id="trail_a">Trail B:</li>
          </a>
          <textarea class="trail_description"></textarea> <br>
          <a href="">
            <li class=lastUl id="trail_a">Trail C:</li>
          </a>
          <textarea class="trail_description"></textarea>
          </a>
        </ul>
      </div>
    </section>


    </main>


    <!--Richard's code-->
    <div class="w-100 state_selector d-flex flex-row mt-5 text-center">
      <section class="me-5  option_box">
        <!--Combo box populated with state code values and state name text-->
          <label class="text-center fw-bold ms-3"  for="state_list" >Please select a state:</label>
          <select id="states" name="state_list">
              
          </select>
      </section>
      <!--Bootstrap collapsible to display National parks on your booking list-->
      <section class="btn_container">
          <button id="btn_search" class="btn btn-primary btn-sm">Search</button>
      </section>
      <div class="bookingsContainer d-flex flex-column justify-content-end">
        
        <button class="btn_bookings btn text-primary" type="button" data-bs-toggle="modal" data-bs-target="#collapse_bookings" aria-expanded="false" aria-controls="collapseExample">
          Click to view bookings(0)
        </button>
                
          <div class="authentication modal fade" id="collapse_bookings" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                
                <div class="modal-body w-100">
                  
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  
                </div>
              </div>
            </div>
        </div>
      </div>
        
    </div>

    <div class="park_container   w-100">
        <div class="park_names ms-3">
            <h3>National Parks</h3>
            <!--Placeholder for the National Parks-->
            <div class="d-flex flex-row justify-content-evenly flex-wrap park_item   ms-3"></div>
                
                
        </div>
    </div>
    <!--Placeholder that provides Detail after clicking on the view button for the particular park-->
    <div class="park_details d-flex flex-row flex-wrap w-75 ms-3 mt-2 ">
      
    </div>

    <!--Placeholder for trails located within a 25 mi radius of the park-->
    <div class="trails_container   w-100">
      <div class="trail_names ms-3">
          <h3>Trails</h3>
          <div class="d-flex flex-row justify-content-evenly flex-wrap trail_item   ms-3"></div>
              
              
      </div>
  </div>

  <!--Placeholder for the details after a view click on a particular trail-->
  <div class="trail_container   w-100">
    <div class="trail_details d-flex flex-row flex-wrap w-75 ms-3 mt-2 ">
  
    </div>
    
</div>
<!--end Richard-->

  <!-- Davids api Test code  -->
  <section>
    <!DOCTYPE html>
    <html lang="en">

    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>NPS State Parks Search</title>
      
    </head>

    <body>
      <div class="container">
        <h1 class="mt-4 mb-4"> State Parks Hike Search</h1>
        <div class="row">
          <div class="col-md-4">
            <div class="form-group">
              <label for="state-input">Select State Code:</label>
              <select id="state-input" class="form-control">
                <option value="">Select a state code</option>
              </select>
            </div>
            <button onclick="searchParks()" class="btn btn-primary">Search</button>
          </div>
        </div>
        <div id="park-list" class="mt-4"></div>
      </div>

      <!-- Bootstrap JS and jQuery -->
      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
      

      <script>
        const apiKey = 'UeGIVNK3jgylK7Eyl4UiLatvibYiM5dwuUAoyp8u';
        const stateCodes = ['AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA', 'HI', 'ID', 'IL', 'IN', 'IA',
          'KS',
          'KY', 'LA', 'ME', 'MD', 'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY', 'NC', 'ND',
          'OH', 'OK', 'OR', 'PA', 'RI', 'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY'
        ];

        const stateInput = document.getElementById('state-input');
        stateCodes.forEach(code => {
          const option = document.createElement('option');
          option.value = code;
          option.textContent = code;
          stateInput.appendChild(option);
        });

        async function searchParks() {
          const stateCode = document.getElementById('state-input').value.trim().toUpperCase();
          if (stateCode === '') {
            alert('Please select a state code.');
            return;
          }

          const apiUrl = `https://developer.nps.gov/api/v1/parks?stateCode=${stateCode}&api_key=${apiKey}`;

          try {
            const response = await fetch(apiUrl);
            const data = await response.json();
            displayParks(data);
          } catch (error) {
            console.error('There was a problem with the fetch operation:', error);
            alert('There was a problem fetching data. Please try again later.');
          }
        }

        async function displayParks(data) {
          const parkList = document.getElementById('park-list');
          parkList.innerHTML = '';

          if (!data || data.data.length === 0) {
            parkList.innerHTML =
              '<div class="alert alert-danger" role="alert">No state parks found in the selected state.</div>';
          } else {
            data.data.forEach(park => {
              const listItem = document.createElement('div');
              listItem.classList.add('card', 'mt-3');
              listItem.innerHTML = `
                <div class="card-body">
                  <h5 class="card-title"><a href="${park.url}" target="_blank">${park.fullName}</a></h5>
                  <p class="card-text">${park.description}</p>
                  <button class="btn btn-primary" onclick="findTrails('${park.latitude}', '${park.longitude}', '${park.fullName}')">Find Trails Nearby</button>
                </div>
              `;
              parkList.appendChild(listItem);
            });
          }
        }

        async function findTrails(latitude, longitude, parkName) {
          const apiUrl =
            `https://trailapi-trailapi.p.rapidapi.com/activity/?lat=${latitude}&lon=${longitude}&radius=25&q-activities_activity_type_name_eq=hiking`;
          const options = {
            method: 'GET',
            headers: {
              'X-RapidAPI-Key': '08d9e2e83fmshb99660e611d154fp174571jsnc99c04c20d12',
              'X-RapidAPI-Host': 'trailapi-trailapi.p.rapidapi.com'
            }
          };

          try {
            const response = await fetch(apiUrl, options);
            const result = await response.json();

            if (result && Object.keys(result).length > 0) {
              const trails = Object.values(result);
              const modalContent = trails.map(trail => {
                return `
                  <strong>Name:</strong> ${trail.name}<br>
                  <strong>City:</strong> ${trail.city}<br>
                  <strong>State:</strong> ${trail.state}<br>
                  <strong>Country:</strong> ${trail.country}<br>
                  <strong>Description:</strong> ${trail.description}<br>
                  <strong>Directions:</strong> ${trail.directions}<br>
                  <strong> Latitute:</strong> ${trail.lat}<br>
                  <strong>Longitude:</strong> ${trail.lon}<br>
                  <hr>
                `;
              }).join('');

              // Create a Bootstrap modal
              const modal = `
                <div class="modal fade" id="trailModal" tabindex="-1" role="dialog" aria-labelledby="trailModalLabel" aria-hidden="true">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="trailModalLabel">${parkName} Trails</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        ${modalContent}
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      </div>
                    </div>
                  </div>
                </div>
              `;

              // Append the modal to the body
              document.body.insertAdjacentHTML('beforeend', modal);

              // Show the modal
              $('#trailModal').modal('show');
            } else {
              // No trails found
              alert('No hiking trails found nearby.');
            }
          } catch (error) {
            console.error(error);
            alert('There was a problem fetching hiking trails. Please try again later.');
          }
        }
      </script>
    </body>

    </html>
  </section>



  <!--jQuery Library CDN-->
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>

  <script src="./assets/js/planner.js"></script>
  <script src="./assets/js/main.js"></script>
  <script src="./assets/api_scripts/trails.js"></script>

  <!--script src="./assets/js/login.js"></script-->
  




</body>

</html>